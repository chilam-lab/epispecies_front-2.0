<body><br>
  <div class="container-fluid">
    <div class="border_radius">
      <h1>Modo</h1>
    </div>

  </div>
  <br><br>
  <div class="container-fluid">
    <div class="row">
      <div class="row py-0">
        <div class="col-md-1 d-flex justify-content-left my-2">Modelo:</div>
        <div class="col-md justify-content-center my-2">
        <mat-select [(ngModel)]="selectedFirstClassId" class="bootstrap-style-mat-select"
            (ngModelChange)="onFirstClassChange($event)">
            <mat-option [value]="env.placeholderFirstClass" disabled selected>{{env.placeholderFirstClass}}</mat-option>
            <ng-container *ngFor="let sickness of firstClassList">
              <mat-option [value]="sickness[0]">{{sickness[1]}}</mat-option>
            </ng-container>
          </mat-select>
        </div>
        <div class="col-md justify-content-center my-2">
          <mat-select [(ngModel)]="selectedSecondClassId" class="bootstrap-style-mat-select"
            [disabled]="secondClassSelectDisable" (ngModelChange)="onSecondClassChange($event)"
            title="Esta selección es opcional" data-bs-toggle="tooltip">
            <mat-option [value]="env.placeholderSecondClass" selected>{{env.placeholderSecondClass}}</mat-option>
            <ng-container *ngFor="let group of secondClassList">
              <mat-option [value]="group[0]">{{group[1]}}</mat-option>
            </ng-container>
          </mat-select>
        </div>
        <div class="col-md my-2">
          <mat-select [(ngModel)]="selectedThirdClassId" class="bootstrap-style-mat-select"
            [disabled]="thirdClassSelectDisable" title="Esta selección es opcional" data-bs-toggle="tooltip">
            <mat-option [value]="env.placeholderThirdClass" selected>{{env.placeholderThirdClass}}</mat-option>
            <ng-container *ngFor="let cause of thirdClassList">
              <mat-option [value]="cause[0]">{{cause[1]}}</mat-option>
            </ng-container>
          </mat-select>
        </div>
      </div>
      <div class="row py-0 h-25 ">
        <div class="col-md-1 d-flex justify-content-left my-2">
          Filtrar por:
        </div>

        <div class="col-md-2 d-flex justify-content-center my-2">
          <mat-select [(ngModel)]="selectedAge" class="bootstrap-style-mat-select">
            <mat-option [value]="env.placeholderAge" selected>{{env.placeholderAge}}</mat-option>
            <ng-container *ngFor="let age of agesList">
              <mat-option [value]="age[0]">{{age}}</mat-option>
            </ng-container>
          </mat-select>
        </div>
        <div class="col-md-2 d-flex justify-content-center my-2">
          <mat-select [(ngModel)]="selectedGender" class="bootstrap-style-mat-select">
            <mat-option [value]="env.placeholderGender" selected>{{env.placeholderGender}}</mat-option>
            <ng-container *ngFor="let genderId of gendersList">
              <mat-option [value]="genderId">{{gendersDict[genderId]}}</mat-option>
            </ng-container>
          </mat-select>
        </div>
        <div class="col-md-2 d-flex justify-content-center my-2">
          <mat-select [(ngModel)]="selectedRegion" (ngModelChange)="showingModalsFromSelect()" class="bootstrap-style-mat-select">
            <mat-option value={{env.placeholderCountry}}  (click)="showingModalsFromSelect()" selected>Todo el país </mat-option>
            <mat-option value={{env.placeholderState}}  (click)="showingModalsFromSelect()" selected>{{env.placeholderState}}</mat-option>
            <mat-option value={{env.placeholderMunicipal}}  (click)="showingModalsFromSelect()">{{env.placeholderMunicipal}} </mat-option>
            <mat-option value={{env.placeholderMetropoli}}>{{env.placeholderMetropoli}}</mat-option>
          </mat-select>
        </div>
        <div class="col-md-2 d-flex justify-content-center my-2">
          <mat-select [(ngModel)]="selectedResolution" class="bootstrap-style-mat-select">
            <mat-option *ngIf="selectedRegion!=env.placeholderMunicipal" value={{env.placeholderStateResolution}}>{{env.placeholderStateResolution}}</mat-option>
            <mat-option value={{env.placeholderMunResolution}} selected>{{env.placeholderMunResolution}}</mat-option>
          </mat-select>
        </div>
        <div class="col-md-2 d-flex justify-content-center my-2">
          <mat-select [(ngModel)]="selectedYear" class="bootstrap-style-mat-select">
            <mat-option [value]="selectedYear" selected>{{selectedYear}}</mat-option>
            <ng-container *ngFor="let year of yearsList">
              <mat-option [value]="year">{{year}}</mat-option>
            </ng-container>
          </mat-select>
        </div>
        <div class="col-md-1 justify-content-center my-2">
          <button class="updateButton" (click)="updateTheDataForTheMap()">Actualizar</button>
        </div>
      </div>
    </div>
  </div>
  <br>

  <div class="container-fluid map-container">
    <div class="row">
      <div class="col-lg-4 p-0 mb-3">
        <div class="jumbotron">
          <h6 style="font-size: 0.85rem;">{{env.selectedFirstClass}}</h6>
          <h6 class="h5-header">
            {{getDescriptionByIdInAList(selectedFirstClassId, firstClassList)}}
          </h6>
          <h6 *ngIf="selectedSecondClassId != env.placeholderSecondClass" style="font-size: 0.85rem;">{{env.selectedSecondClass}}</h6>
          <h6 class="h5-header">{{getDescriptionByIdInAList(selectedSecondClassId,secondClassList)}}</h6>
          <h6 *ngIf="selectedThirdClassId != env.placeholderThirdClass" style="font-size: 0.85rem;">{{env.selectedThirdClass}}</h6>
          <h6 class="h5-header">{{getDescriptionByIdInAList(selectedThirdClassId, thirdClassList)}}</h6>
          <div class="container-fluid">
            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs" id="dataTab" role="tablist">
              <li class="nav-item" role="presentation">
                <a class="nav-link active"
                 id="states-tab"
                 data-bs-toggle="tab"
                 data-bs-target="#states-pane"
                 href="#tableX"
                 aria-current="page">Top 10 de la región</a>
              </li>
              <li class="nav-item" role="presentation">
                <a class="nav-link"
                 id="population-tab"
                 data-bs-toggle="tab"
                 data-bs-target="#population-pane"
                 href="#tableZ">Totales</a>
              </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="dataTabContent">

              <!-- States Tab -->
              <div class="tab-pane fade show active" id="states-pane" role="tabpanel" aria-labelledby="states-tab">
                <div class="table-container">
                  <table class="table table-hover">
                    <thead class="table-header">
                      <tr>
                        <th scope="col">Estado</th>
                        <th scope="col">Número</th>
                      </tr>
                    </thead>
                    <tbody class="table-body">
                      <ng-container *ngIf="updatedResolution == env.placeholderStateResolution; else municipal">
                        <tr *ngFor="let state of top10States">
                          <td>{{getStateName(state[0])}}</td>
                          <td>{{state[1]}}</td>
                        </tr>
                      </ng-container>
                      <ng-template #municipal>
                        <tr *ngFor="let mun of top10Municipalities">
                          <td>{{getStateName(mun[0])}} - {{getMunicipalityName(mun[1])}}</td>
                          <td>{{mun[2]}}</td>
                        </tr>
                      </ng-template>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Population Tab -->
              <div class="tab-pane fade" id="population-pane" role="tabpanel" aria-labelledby="population-tab">
                <h6>{{env.ageTotals}}</h6>
                <div class="table-container">
                  <table class="table table-hover">
                    <tbody class="table-body">
                      <tr *ngFor="let total of showGenderTotals">
                        <td>{{total[0]}}</td>
                        <td>{{total[1]}}</td>
                      </tr>
                    </tbody>

                  </table>
                </div>





                <div class="table-container">
                  <table class="table table-hover">
                    <tr>
                      <td scope="col">Mujeres</td>
                      <td scope="col"></td>
                    </tr>
                  </table>
                </div>





                <div class="table-container">
                  <table class="table table-hover">
                    <tr>
                      <td scope="col">Mujeres</td>
                      <td scope="col"></td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <div class="row justify-content-center">
            <button id="boton_detalles" class="borderedButton">Ver información
              detallada</button>
          </div>
        </div>
      </div>
      <div class="col-lg-8 map-section">

        <div class="row row-map">
          <app-map [updatedResolution]="updatedResolution" [dataByMunToDisplayInMap]="dataByMunToDisplayInMap" [selectedCVEState]="selectedCVEState" [selectedCVEMun]="selectedCVEMun" [statesAndMunList]="statesAndMunList">
          </app-map>
        </div>
      </div>
    </div>
  </div>
</body>

<button #showStateModal [hidden]="true"  type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#stateModal">
  Launch demo modal
</button>
<button #showMunModal [hidden]="true"  type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#municipality">
  Launch demo modal2
</button>
<!--- Modals --->
<div class="modal fade" id="stateModal" tabindex="-1" aria-labelledby="exampleModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Estado</h5>
        <button type="button" class="btn-close" (click)="closingModal('municipio')" data-bs-dismiss="modal"
          aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <label for="exampleDataList">Seleccione el estado: </label>
        <input class="form-control" list="datalistOptions" id="exampleDataList" [(ngModel)]="selectedState"
          placeholder="Escriba para buscar...">
        <datalist id="datalistOptions">
          <ng-container *ngFor="let state of statesNameList">
            <option>{{ state }}</option>
          </ng-container>
        </datalist>
      </div>
      <div class="modal-footer">
        <button type="button" [hidden]="true" class="btn btn-secondary" #modalState
          data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" (click)="selectStateInModal()">Seleccionar</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="municipality" tabindex="-1" aria-labelledby="exampleModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Municipio</h5>
        <button type="button" class="btn-close" (click)="closingModal('municipio')" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <label for="exampleDataList">Seleccione el estado: </label>
        <input class="form-control" list="datalistOptions" id="exampleDataList" [(ngModel)]="selectedState" (change)="onStateModalInputChange($event)"
          placeholder="Escriba para buscar...">
        <datalist id="datalistOptions">
          <ng-container *ngFor="let state of statesNameList">
            <option>{{ state }}</option>
          </ng-container>
        </datalist><br>
        <label for="exampleDataList">Seleccione el municipio: </label>
        <input class="form-control" list="datalistOptions2" id="exampleDataList" [(ngModel)]="selectedMuncipality"
          placeholder="Escriba para buscar..." >
        <datalist id="datalistOptions2">
          <ng-container *ngFor="let item of munNameList">
            <option value="{{item[3]}}">
          </ng-container>
        </datalist>
      </div>
      <div class="modal-footer">
        <button type="button" [hidden]="true" class="btn btn-secondary" #modalMun data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" (click)="verifyDataInMunModal()">Seleccionar</button>
      </div>
    </div>
  </div>
</div>
